[{"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/reducers/index.js":"1","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/category/CategoryList.js":"2","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/modal/RatingModal.js":"3","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/user/History.js":"4","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/cards/ShowPaymentInfo.js":"5","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/index.js":"6","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/Home.js":"7","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/Checkout.js":"8","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/auth/ForgotPassword.js":"9","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/forms/FileUpload.js":"10","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/cards/LoadingCard.js":"11","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/order/Invoice.js":"12","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/admin/AdminDashboard.js":"13","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/reportWebVitals.js":"14","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/Product.js":"15","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/firebase.js":"16","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/functions/rating.js":"17","/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/order/Orders.js":"18"},{"size":459,"mtime":1617389034527,"results":"19","hashOfConfig":"20"},{"size":936,"mtime":1614714858714,"results":"21","hashOfConfig":"20"},{"size":1239,"mtime":1614134783211,"results":"22","hashOfConfig":"20"},{"size":2773,"mtime":1617730481287,"results":"23","hashOfConfig":"20"},{"size":959,"mtime":1617800174929,"results":"24","hashOfConfig":"20"},{"size":709,"mtime":1611888971443,"results":"25","hashOfConfig":"20"},{"size":1075,"mtime":1615329592247,"results":"26","hashOfConfig":"20"},{"size":4614,"mtime":1617400488853,"results":"27","hashOfConfig":"20"},{"size":1789,"mtime":1611952440133,"results":"28","hashOfConfig":"20"},{"size":3132,"mtime":1613763658757,"results":"29","hashOfConfig":"20"},{"size":433,"mtime":1613845715408,"results":"30","hashOfConfig":"20"},{"size":2778,"mtime":1617732078288,"results":"31","hashOfConfig":"20"},{"size":1212,"mtime":1617799941192,"results":"32","hashOfConfig":"20"},{"size":362,"mtime":1606348221080,"results":"33","hashOfConfig":"20"},{"size":2154,"mtime":1614714952130,"results":"34","hashOfConfig":"20"},{"size":640,"mtime":1606602040843,"results":"35","hashOfConfig":"20"},{"size":871,"mtime":1614715970656,"results":"36","hashOfConfig":"20"},{"size":2331,"mtime":1617799832483,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"117dquv",{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"56"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/reducers/index.js",[],["77","78"],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/category/CategoryList.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/modal/RatingModal.js",["79"],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/user/History.js",["80","81","82"],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/cards/ShowPaymentInfo.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/index.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/Home.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/Checkout.js",["83"],"import React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  getUserCart,\n  emptyUserCart,\n  saveUserAddress,\n  applyCoupon,\n} from '../functions/user'\nimport { toast } from 'react-toastify'\nimport ReactQuill from 'react-quill'\nimport 'react-quill/dist/quill.snow.css'\n\nconst Checkout = ({ history }) => {\n  const [products, setProducts] = useState([])\n  const [total, setTotal] = useState(0)\n  const [address, setAddress] = useState('')\n  const [addressSaved, setAddressSaved] = useState(false)\n  const [coupon, setCoupon] = useState('')\n  const [totalAfterDiscount, setTotalAfterDiscount] = useState(0)\n  const [discountError, setDiscountError] = useState('')\n\n  const dispatch = useDispatch()\n  const { user } = useSelector((state) => ({ ...state }))\n\n  useEffect(() => {\n    getUserCart(user.token).then((res) => {\n      // console.log('user cart res', JSON.stringify(res.data, null, 4))\n      setProducts(res.data.products)\n      setTotal(res.data.cartTotal)\n    })\n  }, [])\n\n  const emptyCart = () => {\n    // remove from local storage\n    if (typeof window !== undefined) {\n      localStorage.removeItem('ecomm_cart')\n    }\n\n    // remove from redux\n    dispatch({\n      type: 'ADD_TO_CART',\n      payload: [],\n    })\n\n    // remove from backend\n    emptyUserCart(user.token).then((res) => {\n      setProducts([])\n      setTotal(0)\n      setTotalAfterDiscount(0)\n      setCoupon('')\n      toast.success('Cart is empty. Continue shopping.')\n    })\n  }\n\n  const saveAddressToDb = () => {\n    // console.log(address)\n\n    saveUserAddress(user.token, address).then((res) => {\n      if (res.data.ok) {\n        setAddressSaved(true)\n        toast.success('Address saved')\n      }\n    })\n  }\n\n  const applyDiscountCoupon = () => {\n    console.log('send coupon to backend', coupon)\n    applyCoupon(user.token, coupon).then((res) => {\n      console.log('RES ON COUPON APPLIED', res.data)\n      if (res.data) {\n        setTotalAfterDiscount(res.data)\n        // update Redux coupon applied true/false\n        dispatch({\n          type: 'COUPON_APPLIED',\n          payload: true,\n        })\n      }\n      // error\n      if (res.data.err) {\n        setDiscountError(res.data.err)\n        // update Redux coupon applied true/false\n        dispatch({\n          type: 'COUPON_APPLIED',\n          payload: false,\n        })\n      }\n    })\n  }\n\n  const showAddress = () => (\n    <>\n      <ReactQuill theme=\"snow\" value={address} onChange={setAddress} />\n      <button className=\"btn btn-primary mt-2\" onClick={saveAddressToDb}>\n        Save\n      </button>\n    </>\n  )\n\n  const showProductSummary = () =>\n    products.map((p, i) => (\n      <div key={i}>\n        <p>\n          {p.product.title} ({p.color}) x {p.count} = $\n          {(p.product.price * p.count).toFixed(2)}\n        </p>\n      </div>\n    ))\n\n  const showApplyCoupon = () => (\n    <>\n      <input\n        onChange={(e) => {\n          setCoupon(e.target.value)\n          setDiscountError('')\n        }}\n        type=\"text\"\n        className=\"form-control\"\n        value={coupon}\n      />\n      <button onClick={applyDiscountCoupon} className=\"btn btn-primary mt-2\">\n        Apply\n      </button>\n    </>\n  )\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-md-6\">\n        <h4>Delivery Address</h4>\n        <br />\n        <br />\n        {showAddress()}\n        <hr />\n        <h4>Got Coupon?</h4>\n        <br />\n        {showApplyCoupon()}\n        <br />\n        {discountError && <p className=\"bg-danger p-2\">{discountError}</p>}\n      </div>\n      <div className=\"col-md-6\">\n        <h4>Order Summary</h4>\n        <hr />\n        <p>Products {products.length}</p>\n        <hr />\n        {showProductSummary()}\n        <hr />\n        <p>Cart Total: ${total.toFixed(2)}</p>\n\n        {totalAfterDiscount > 0 && (\n          <p className=\"bg-success p-2\">\n            Discount applied: Total Payable: ${totalAfterDiscount}\n          </p>\n        )}\n\n        <div className=\"row\">\n          <div className=\"col-md-6\">\n            <button\n              disabled={!addressSaved || !products.length}\n              className=\"btn btn-primary\"\n              onClick={() => history.push('/payment')}\n            >\n              Place Order\n            </button>\n          </div>\n          <div className=\"col-md-6\">\n            <button\n              disabled={!products.length}\n              onClick={emptyCart}\n              className=\"btn btn-primary\"\n            >\n              Empty Cart\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Checkout\n",["84","85"],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/auth/ForgotPassword.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/forms/FileUpload.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/cards/LoadingCard.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/order/Invoice.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/admin/AdminDashboard.js",["86","87"],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/reportWebVitals.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/pages/Product.js",["88"],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/firebase.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/functions/rating.js",[],"/Users/dougmoore/Documents/Develop/projects/udemy/ecommerce/client/src/components/order/Orders.js",[],{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","severity":1,"message":"94","line":2,"column":17,"nodeType":"95","messageId":"96","endLine":2,"endColumn":23},{"ruleId":"93","severity":1,"message":"97","line":4,"column":23,"nodeType":"95","messageId":"96","endLine":4,"endColumn":34},{"ruleId":"93","severity":1,"message":"98","line":6,"column":10,"nodeType":"95","messageId":"96","endLine":6,"endColumn":15},{"ruleId":"99","severity":1,"message":"100","line":17,"column":6,"nodeType":"101","endLine":17,"endColumn":8,"suggestions":"102"},{"ruleId":"99","severity":1,"message":"103","line":31,"column":6,"nodeType":"101","endLine":31,"endColumn":8,"suggestions":"104"},{"ruleId":"89","replacedBy":"105"},{"ruleId":"91","replacedBy":"106"},{"ruleId":"93","severity":1,"message":"97","line":4,"column":23,"nodeType":"95","messageId":"96","endLine":4,"endColumn":34},{"ruleId":"99","severity":1,"message":"107","line":14,"column":6,"nodeType":"101","endLine":14,"endColumn":8,"suggestions":"108"},{"ruleId":"99","severity":1,"message":"109","line":17,"column":6,"nodeType":"101","endLine":17,"endColumn":12,"suggestions":"110"},"no-native-reassign",["111"],"no-negated-in-lhs",["112"],"no-unused-vars","'Button' is defined but never used.","Identifier","unusedVar","'useDispatch' is defined but never used.","'toast' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'loadUserOrders'. Either include it or remove the dependency array.","ArrayExpression",["113"],"React Hook useEffect has a missing dependency: 'user.token'. Either include it or remove the dependency array.",["114"],["111"],["112"],"React Hook useEffect has a missing dependency: 'loadOrders'. Either include it or remove the dependency array.",["115"],"React Hook useEffect has a missing dependency: 'loadSingleProduct'. Either include it or remove the dependency array.",["116"],"no-global-assign","no-unsafe-negation",{"desc":"117","fix":"118"},{"desc":"119","fix":"120"},{"desc":"121","fix":"122"},{"desc":"123","fix":"124"},"Update the dependencies array to be: [loadUserOrders]",{"range":"125","text":"126"},"Update the dependencies array to be: [user.token]",{"range":"127","text":"128"},"Update the dependencies array to be: [loadOrders]",{"range":"129","text":"130"},"Update the dependencies array to be: [loadSingleProduct, slug]",{"range":"131","text":"132"},[675,677],"[loadUserOrders]",[1032,1034],"[user.token]",[489,491],"[loadOrders]",[591,597],"[loadSingleProduct, slug]"]